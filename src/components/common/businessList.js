import React, { Component } from 'react';
import '../../scss/businessList.scss';
import { Toast } from 'antd-mobile';

class BusinessList extends Component {
    constructor(props) {
        super();
        this.state = {
            business_details: {}
        }
    }
    componentWillMount() {
        console.log(this.props)
        this.setState({
            business_details: this.props.data
        })
    }

    // 跳转
    handleClick(){
        if(this.state.business_details.isOpen === 0) {
            Toast.fail('该店铺已打样', 1);
            return
        }
		/*用户的地址hash和商家id*/
		window.location.href=`/shop/${this.state.business_details.id}`;
    }
    
    render() { 
        let delivery_time = this.state.business_details.isOpen === 0 ?
            <div className="delivery_time">
                <div className="delivery_time_box">
                    开店时间：{this.state.business_details.startTime}
                </div>
            </div> : null

        let introduce = this.state.business_details.introduce !== '' ?
            <div className="introduce">
                <span className="introduce_box">“{this.state.business_details.introduce}”</span>
            </div> : null

        
        // 食物内容 
        let food = this.state.business_details.food_info !== undefined ? 
            this.state.business_details.food_info.map((value, index) => {
                return (
                    <div className="food_details_box">
                        <img src={`${window.config_url}${value.img}`} alt="" className="box_img"></img>
                        <p className="box_name">{value.name}</p>
                        <p className="box_money">{value.money}</p>
                    </div>
                )
            }) : null

        return (
            <div className="shoplist_item"  onClick={this.handleClick.bind(this)}>
                <div className="shoplist_img">
                    <img src={`${window.config_url}${this.state.business_details.img}`} alt="" />
                </div>
                <div className="shoplist_main">
                    <h3 className="show_line_h3">
                        <span>{this.state.business_details.name}</span>
                    </h3>
                    {delivery_time}
                    <div className="show_rateWrap">
                        <div>
                            <div className='activityPage_star'>
                                <div className='show_star'>
                                    <svg t="1577549773722" className="icon" viewBox="0 0 6144 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3293" width="200" height="200"><path d="M1083.533 455.479l-182.749 158.543c-11.506 11.355-16.757 27.714-14.040 43.748l43.151 254.663c3.376 20.18 0.006 34.641-16.34 46.695-9.247 6.807-20.251 10.278-31.253 10.278-8.451 0-16.929-2.045-24.716-6.188l-230.746-125.901c-14.222-7.569-31.212-7.569-45.433 0l-221.060 125.903c-17.913 9.551-39.598 7.937-55.996-4.090-16.345-12.054-29.399-26.49-25.97-46.695l52.862-259.948c2.716-16.033-2.534-32.394-14.040-43.748l-192.459-153.257c-14.537-14.288-19.719-35.677-13.5-55.156 6.27-19.48 22.882-33.658 42.92-36.619l250.336-44.476c15.896-2.34 29.637-12.446 36.748-27.027l115.253-246.228c8.93-18.376 27.4-30 47.653-30s38.667 11.623 47.651 30l110.731 246.222c7.111 14.585 20.854 24.695 36.753 27.035l254.853 44.475c19.986 2.932 36.648 17.139 42.869 36.619 6.246 19.479 0.983 40.868-13.473 55.157v0z" fill="#bfbfbf" p-id="3294"></path><path d="M2322.862 455.38l-182.749 158.543c-11.506 11.355-16.757 27.714-14.040 43.748l43.151 254.663c3.376 20.18 0.006 34.641-16.34 46.695-9.249 6.807-20.251 10.278-31.253 10.278-8.451 0-16.929-2.045-24.716-6.188l-230.746-125.901c-14.222-7.569-31.212-7.569-45.433 0l-221.060 125.903c-17.913 9.551-39.598 7.937-55.996-4.090-16.345-12.054-29.399-26.49-25.97-46.695l52.862-259.948c2.716-16.033-2.534-32.394-14.040-43.748l-192.459-153.257c-14.537-14.288-19.719-35.677-13.5-55.157 6.27-19.48 22.882-33.658 42.92-36.619l250.336-44.476c15.896-2.34 29.637-12.446 36.748-27.027l115.253-246.228c8.93-18.376 27.4-30 47.651-30s38.667 11.623 47.651 30l110.731 246.222c7.111 14.585 20.854 24.695 36.753 27.035l254.853 44.475c19.986 2.932 36.648 17.139 42.869 36.619 6.246 19.479 0.983 40.868-13.473 55.157v0z" fill="#bfbfbf" p-id="3295"></path><path d="M3563.174 455.38l-182.749 158.543c-11.506 11.355-16.757 27.714-14.040 43.748l43.151 254.663c3.376 20.18 0.006 34.641-16.34 46.695-9.247 6.807-20.251 10.278-31.253 10.278-8.451 0-16.929-2.045-24.716-6.188l-230.746-125.901c-14.222-7.569-31.212-7.569-45.433 0l-221.060 125.903c-17.913 9.551-39.598 7.937-55.996-4.090-16.345-12.054-29.399-26.49-25.97-46.695l52.86-259.948c2.716-16.033-2.534-32.394-14.040-43.748l-192.459-153.257c-14.537-14.288-19.719-35.677-13.5-55.157 6.272-19.48 22.882-33.658 42.92-36.619l250.336-44.476c15.896-2.34 29.637-12.446 36.748-27.027l115.253-246.228c8.93-18.376 27.4-30 47.651-30s38.667 11.623 47.651 30l110.731 246.222c7.111 14.585 20.854 24.695 36.753 27.035l254.853 44.475c19.986 2.932 36.648 17.139 42.869 36.619 6.246 19.479 0.983 40.868-13.473 55.157v0z" fill="#bfbfbf" p-id="3296"></path><path d="M4803.487 455.38l-182.749 158.543c-11.506 11.355-16.757 27.714-14.040 43.748l43.151 254.663c3.376 20.18 0.006 34.641-16.34 46.695-9.247 6.807-20.251 10.278-31.253 10.278-8.451 0-16.929-2.045-24.716-6.188l-230.746-125.901c-14.222-7.569-31.212-7.569-45.433 0l-221.060 125.903c-17.913 9.551-39.598 7.937-55.996-4.090-16.345-12.054-29.399-26.49-25.97-46.695l52.86-259.948c2.716-16.033-2.534-32.394-14.040-43.748l-192.459-153.257c-14.537-14.288-19.719-35.677-13.5-55.157 6.272-19.48 22.882-33.658 42.92-36.619l250.336-44.476c15.896-2.34 29.637-12.446 36.748-27.027l115.253-246.228c8.93-18.376 27.4-30 47.651-30s38.667 11.623 47.651 30l110.731 246.222c7.111 14.585 20.854 24.695 36.753 27.035l254.853 44.475c19.986 2.932 36.648 17.139 42.869 36.619 6.246 19.479 0.983 40.868-13.473 55.157v0z" fill="#bfbfbf" p-id="3297"></path><path d="M6043.799 455.38l-182.749 158.543c-11.506 11.355-16.757 27.714-14.040 43.748l43.151 254.663c3.376 20.18 0.006 34.641-16.34 46.695-9.247 6.807-20.251 10.278-31.253 10.278-8.451 0-16.929-2.045-24.716-6.188l-230.746-125.901c-14.222-7.569-31.212-7.569-45.433 0l-221.060 125.903c-17.913 9.551-39.598 7.937-55.996-4.090-16.345-12.054-29.399-26.49-25.97-46.695l52.86-259.948c2.716-16.033-2.534-32.394-14.040-43.748l-192.459-153.257c-14.537-14.288-19.719-35.677-13.5-55.157 6.272-19.48 22.882-33.658 42.92-36.619l250.336-44.476c15.896-2.34 29.637-12.446 36.748-27.027l115.253-246.228c8.93-18.376 27.4-30 47.653-30s38.667 11.623 47.651 30l110.731 246.222c7.111 14.585 20.854 24.695 36.753 27.035l254.853 44.475c19.986 2.932 36.648 17.139 42.869 36.619 6.246 19.479 0.983 40.868-13.473 55.157v0z" fill="#bfbfbf" p-id="3298"></path></svg>
                                </div>
                                <div className='start_cover' style={{width:`${100*this.state.business_details.grade/5}%`}}>
                                    <svg t="1577549773722" className="icon" viewBox="0 0 6144 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3293" width="200" height="200"><path d="M1083.533 455.479l-182.749 158.543c-11.506 11.355-16.757 27.714-14.040 43.748l43.151 254.663c3.376 20.18 0.006 34.641-16.34 46.695-9.247 6.807-20.251 10.278-31.253 10.278-8.451 0-16.929-2.045-24.716-6.188l-230.746-125.901c-14.222-7.569-31.212-7.569-45.433 0l-221.060 125.903c-17.913 9.551-39.598 7.937-55.996-4.090-16.345-12.054-29.399-26.49-25.97-46.695l52.862-259.948c2.716-16.033-2.534-32.394-14.040-43.748l-192.459-153.257c-14.537-14.288-19.719-35.677-13.5-55.156 6.27-19.48 22.882-33.658 42.92-36.619l250.336-44.476c15.896-2.34 29.637-12.446 36.748-27.027l115.253-246.228c8.93-18.376 27.4-30 47.653-30s38.667 11.623 47.651 30l110.731 246.222c7.111 14.585 20.854 24.695 36.753 27.035l254.853 44.475c19.986 2.932 36.648 17.139 42.869 36.619 6.246 19.479 0.983 40.868-13.473 55.157v0z" fill="#fba503" p-id="3294"></path><path d="M2322.862 455.38l-182.749 158.543c-11.506 11.355-16.757 27.714-14.040 43.748l43.151 254.663c3.376 20.18 0.006 34.641-16.34 46.695-9.249 6.807-20.251 10.278-31.253 10.278-8.451 0-16.929-2.045-24.716-6.188l-230.746-125.901c-14.222-7.569-31.212-7.569-45.433 0l-221.060 125.903c-17.913 9.551-39.598 7.937-55.996-4.090-16.345-12.054-29.399-26.49-25.97-46.695l52.862-259.948c2.716-16.033-2.534-32.394-14.040-43.748l-192.459-153.257c-14.537-14.288-19.719-35.677-13.5-55.157 6.27-19.48 22.882-33.658 42.92-36.619l250.336-44.476c15.896-2.34 29.637-12.446 36.748-27.027l115.253-246.228c8.93-18.376 27.4-30 47.651-30s38.667 11.623 47.651 30l110.731 246.222c7.111 14.585 20.854 24.695 36.753 27.035l254.853 44.475c19.986 2.932 36.648 17.139 42.869 36.619 6.246 19.479 0.983 40.868-13.473 55.157v0z" fill="#fba503" p-id="3295"></path><path d="M3563.174 455.38l-182.749 158.543c-11.506 11.355-16.757 27.714-14.040 43.748l43.151 254.663c3.376 20.18 0.006 34.641-16.34 46.695-9.247 6.807-20.251 10.278-31.253 10.278-8.451 0-16.929-2.045-24.716-6.188l-230.746-125.901c-14.222-7.569-31.212-7.569-45.433 0l-221.060 125.903c-17.913 9.551-39.598 7.937-55.996-4.090-16.345-12.054-29.399-26.49-25.97-46.695l52.86-259.948c2.716-16.033-2.534-32.394-14.040-43.748l-192.459-153.257c-14.537-14.288-19.719-35.677-13.5-55.157 6.272-19.48 22.882-33.658 42.92-36.619l250.336-44.476c15.896-2.34 29.637-12.446 36.748-27.027l115.253-246.228c8.93-18.376 27.4-30 47.651-30s38.667 11.623 47.651 30l110.731 246.222c7.111 14.585 20.854 24.695 36.753 27.035l254.853 44.475c19.986 2.932 36.648 17.139 42.869 36.619 6.246 19.479 0.983 40.868-13.473 55.157v0z" fill="#fba503" p-id="3296"></path><path d="M4803.487 455.38l-182.749 158.543c-11.506 11.355-16.757 27.714-14.040 43.748l43.151 254.663c3.376 20.18 0.006 34.641-16.34 46.695-9.247 6.807-20.251 10.278-31.253 10.278-8.451 0-16.929-2.045-24.716-6.188l-230.746-125.901c-14.222-7.569-31.212-7.569-45.433 0l-221.060 125.903c-17.913 9.551-39.598 7.937-55.996-4.090-16.345-12.054-29.399-26.49-25.97-46.695l52.86-259.948c2.716-16.033-2.534-32.394-14.040-43.748l-192.459-153.257c-14.537-14.288-19.719-35.677-13.5-55.157 6.272-19.48 22.882-33.658 42.92-36.619l250.336-44.476c15.896-2.34 29.637-12.446 36.748-27.027l115.253-246.228c8.93-18.376 27.4-30 47.651-30s38.667 11.623 47.651 30l110.731 246.222c7.111 14.585 20.854 24.695 36.753 27.035l254.853 44.475c19.986 2.932 36.648 17.139 42.869 36.619 6.246 19.479 0.983 40.868-13.473 55.157v0z" fill="#fba503" p-id="3297"></path><path d="M6043.799 455.38l-182.749 158.543c-11.506 11.355-16.757 27.714-14.040 43.748l43.151 254.663c3.376 20.18 0.006 34.641-16.34 46.695-9.247 6.807-20.251 10.278-31.253 10.278-8.451 0-16.929-2.045-24.716-6.188l-230.746-125.901c-14.222-7.569-31.212-7.569-45.433 0l-221.060 125.903c-17.913 9.551-39.598 7.937-55.996-4.090-16.345-12.054-29.399-26.49-25.97-46.695l52.86-259.948c2.716-16.033-2.534-32.394-14.040-43.748l-192.459-153.257c-14.537-14.288-19.719-35.677-13.5-55.157 6.272-19.48 22.882-33.658 42.92-36.619l250.336-44.476c15.896-2.34 29.637-12.446 36.748-27.027l115.253-246.228c8.93-18.376 27.4-30 47.653-30s38.667 11.623 47.651 30l110.731 246.222c7.111 14.585 20.854 24.695 36.753 27.035l254.853 44.475c19.986 2.932 36.648 17.139 42.869 36.619 6.246 19.479 0.983 40.868-13.473 55.157v0z" fill="#fba503" p-id="3298"></path></svg>
                                </div>
                            </div>
                        </div>
                        <span className='show_num'>{this.state.business_details.grade}</span>
                        <span className='show_num'>月售{this.state.business_details.orderNum}单</span>
                    </div>
                    <div className='show_money'>
                        <span>¥{this.state.business_details.arriveMoney}起送</span>
                        <span>配送费¥{this.state.business_details.fee}</span>
                    </div>
                    {introduce}
                    <div className="food_details">
                        {food}
                    </div>
                </div>
            </div>
        );
    }
}
 
export default BusinessList;